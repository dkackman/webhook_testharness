extends layout

block content
  .container-fluid
    .d-flex.align-items-center.justify-content-between.mb-3
      h2.mb-0= title
      .d-flex.gap-2.align-items-center
        span.badge.text-bg-secondary#webhook-status Not registered

    .row.g-3
      .col-lg-8
        .card
          .card-header.d-flex.align-items-center.justify-content-between
            .fw-semibold Live Webhook Events
            button.btn.btn-sm.btn-outline-secondary(type="button" onclick="clearWebhookEvents()") Clear
          .card-body.p-0
            #webhook-events.log-panel.font-monospace.small No webhook events yet

      .col-lg-4
        .card.mb-3
          .card-header.fw-semibold Webhook Setup
          .card-body
            label.form-label(for="secret-input") Webhook Secret (optional)
            input#secret-input.form-control(type="text" placeholder="Enter secret for HMAC verification")
            .form-text If provided, webhooks will be signed with HMAC-SHA256.

            .d-flex.gap-2.mt-3
              button#register-btn.btn.btn-primary(type="button" onclick="registerWebhook()") Register
              button#unregister-btn.btn.btn-outline-danger(type="button" onclick="unregisterWebhook()" style="display: none;") Unregister

            #verification-status.alert.alert-secondary.mt-3.mb-0.p-2
              .d-flex.align-items-center.justify-content-between
                span.fw-semibold HMAC Verification
                span#verification-enabled.badge.text-bg-secondary Disabled

        .card
          .card-header.fw-semibold Registration Response
          .card-body.p-0
            pre#response-display.log-panel-sm.font-monospace.small.m-0.p-3 Hook not registered

  script(src='/javascripts/cookies.js')
  script(src='/javascripts/ui-helpers.js')
  script(src='/javascripts/event-stream.js')
  script(src='/javascripts/webhook-api.js')
  script(src='/javascripts/main.js')